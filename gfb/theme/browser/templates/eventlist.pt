<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="iwwb.eventlist">
<body>

<metal:css fill-slot="style_slot">
  <link tal:attributes="href string:$portal_url/++resource++jquery.datatables/media/css/demo_table.css" media="screen" type="text/css" rel="stylesheet">
  <link tal:attributes="href string:$portal_url/++resource++jquery.datatables/extras/TableTools/media/css/TableTools.css" media="screen" type="text/css" rel="stylesheet">
  <link tal:attributes="href string:$portal_url/++resource++iwwb.eventlist/eventlist.css" media="screen" type="text/css" rel="stylesheet">
</metal:css>

<metal:js fill-slot="javascript_head_slot">
  <script tal:attributes="src string:$portal_url/++resource++jquery.datatables/extras/TableTools/media/js/ZeroClipboard.js" type="text/javascript"></script>
  <script tal:attributes="src string:$portal_url/++resource++jquery.datatables/extras/TableTools/media/js/TableTools.js" type="text/javascript"></script>
  <script tal:attributes="src string:$portal_url/++resource++iwwb.eventlist/eventlist.js" type="text/javascript"></script>
</metal:js>

<metal:main fill-slot="main" tal:define="plone_view here/@@plone;">
  <metal:main define-macro="main">
<style type="text/css">
#eventlist-form .formHelp { display: none;}
#eventlist-form label { font-weight: normal;}
#eventlist-form .field { margin-left: 1em; width: 340px; min-width:340px;}
#eventlist-form #form-widgets-query { width: 320px; }
#eventlist-form { height: 250px; background: url("col-center-bg.jpg") repeat-x scroll 0 0 white; }
#eventlist-form .formControls { width: 740px; margin-top:0.5em;
text-align:right; background-color: #D6D9DE; border: 1px solid
#BAC1C9;}
#eventlist-form .formControls input.submit-widget { background: url(ico_search.gif) no-repeat 0 6px;
border: 0; }
#eventlist-form #form-buttons-reset { display:none;}
#eventlist-form #form-widgets-startMonth-day {display:none;}
.searchPage .dataTables_length { margin-top: 0.5em; }
.searchPage .dataTables_filter { margin-top: 0.5em; }
.searchPage .dataTables_info { top:-22px; left:90px; color:white;
position:absolute;}
.searchPage .dataTables_paginate {top:-25px; position:absolute; left:340px; }
.searchPage .pagination .first { display:none; }
.searchPage .pagination .last { display:none; }
.searchPage .pagination .next { display:none; }
.searchPage .pagination .previous { display:none; }
.searchPage .DTTT_container { margin-top:0.5em;}

</style>

    <h1 class="documentFirstHeading" i18n:translate="">
      List events
    </h1>

          <div id="simplesearch">
            <ul class="search-top">
              <li><span class="link-internal-js">&nbsp;</span> <a>Suche in der Datenbank</a></li>
            </ul>
          </div>
    <div id="eventlist-form">
      <form tal:replace="structure view/contents" />
    </div>

    <div class="visualClear"></div>

   <div class="searchPage">
    <div i18n:translate="" id="heading_search_results_box">
      <span id="heading_search_results" style="float: none;">Results</span>
    </div>
    <tal:results define="events view/options/events|nothing">
        <!-- The id here here must be 'example' because we use dataTable's demo CSS -->
        <table id="example" class="display"
               tal:condition="events">
          <thead>
            <tr>
              <th i18n:translate="">Title</th>
              <th i18n:translate="">Type</th>
              <th i18n:translate="">City</th>
              <th i18n:translate="">Zip</th>
              <th i18n:translate="">Start date</th>
              <th i18n:translate="">Training Supplier</th>
              <th i18n:translate="">Database Supplier</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="event events">
              <td>
                <a tal:content="event/Title"
                   tal:attributes="href event/ReferenceUrl|nothing">
                  Title
                </a>
              </td>
              <td tal:content="structure python: view.event_type(event.Type)">Event type</td>
              <td tal:content="structure event/City|nothing">City</td>
              <td tal:content="event/Zip|nothing">Zip code</td>
              <td tal:define="st event/StartTime|nothing"
              tal:content="python:plone_view.toLocalizedTime(st)">Start date</td>
              <td>
                <a tal:content="structure event/TrainingSupplier|nothing"
                   tal:attributes="href event/TrainingSupplierUrl|nothing">
                  Training Supplier
                </a>
              </td>
              <td>
                <a tal:content="structure event/DatabaseSupplier|nothing"
                   tal:attributes="href event/DatabaseSupplierURL|nothing">
                  Database Supplier
                </a>
              </td>
            </tr>
          </tbody>
        </table>
        <p tal:condition="python: not events">No results were found.</p>
    </tal:results>
  </div>
  </metal:main>
</metal:main>

</body>
</html>
